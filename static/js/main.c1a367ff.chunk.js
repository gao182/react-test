(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,a){},193:function(e,t,a){e.exports=a(393)},221:function(e,t,a){},270:function(e,t,a){},375:function(e,t,a){},387:function(e,t,a){},388:function(e,t,a){},392:function(e,t,a){},393:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),s=a(59),i=a(23);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(14),u=a(15),d=a(17),m=a(16),p=a(18),h=a(52),f=a(29),b="";b="/react-tomato";var y=Object(f.a)({basename:b}),v=a(12),g=a.n(v),E=a(20),T=a(38),k=a(175),j=a.n(k).a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"MZ13YZmMt7T4VgrAKnNTAGew","t-app-secret":"VRckyW3NjpeewYS8UVQFCTBE"}});j.interceptors.request.use(function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){return console.error(e),Promise.reject(e)}),j.interceptors.response.use(function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e},function(e){return 401===e.response.status&&y.push("/login"),Promise.reject(e)});var O=j,w=a(60),C=a.n(w),x=a(24),N=a(395),Y=function(e){return{type:"update_todo",payload:e}},_=function(e){return{type:"update_tomato",payload:e}},D=a(396),M=a(11),A=(a(221),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).postTodo=Object(E.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("todos",{description:a.state.description});case 3:t=e.sent,a.props.addTodo(t.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:a.setState({description:""});case 11:case"end":return e.stop()}},e,null,[[0,7]])})),a.state={description:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"keyenter",value:function(e){13===e.keyCode&&""!==this.state.description&&this.postTodo()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"todoInput"},r.a.createElement(D.a,{suffix:r.a.createElement(M.a,{type:"enter",onClick:this.postTodo.bind(this),style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:this.keyenter.bind(this),value:this.state.description}))}}]),t}(r.a.Component)),S={addTodo:function(e){return{type:"add_todos",payload:e}}},K=Object(i.b)(function(e,t){return Object(x.a)({},t)},S)(A),U=a(399),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).updateTodo=function(){var e=Object(E.a)(g.a.mark(function e(t){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.put("todos/".concat(a.props.id),t);case 3:n=e.sent,a.props.updateTodo(n.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),a.editTodo=function(){a.props.editTodo(a.props.id)},a.keyenter=function(e){13===e.keyCode&&""!==a.state.editText&&a.updateTodo({description:a.state.editText})},a.state={editText:a.props.description},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"textbox"},r.a.createElement("span",null,this.props.description),r.a.createElement("div",{className:"todoicon"},r.a.createElement(M.a,{type:"edit",theme:"filled",onClick:this.editTodo}),r.a.createElement(M.a,{onClick:function(t){return e.updateTodo({deleted:!0})},type:"delete",theme:"filled"}))),a=r.a.createElement("div",{className:"inputbox"},r.a.createElement("input",{type:"text",value:this.state.editText,onKeyUp:this.keyenter,onChange:function(t){return e.setState({editText:t.target.value})}}),r.a.createElement(M.a,{type:"enter",onClick:function(t){return e.updateTodo({description:e.state.editText})}}));return r.a.createElement("div",{className:this.props.editing?"todoitem focus":"todoitem"},r.a.createElement(U.a,{checked:this.props.completed,onChange:function(t){return e.updateTodo({completed:t.target.checked})}}),this.props.editing?a:t)}}]),t}(r.a.Component),I={editTodo:function(e){return{type:"edit_todo",payload:e}},updateTodo:Y},L=Object(i.b)(function(e,t){return Object(x.a)({},t)},I)(P),H=(a(270),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).getTodos=Object(E.a)(g.a.mark(function e(){var t,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("todos");case 2:t=e.sent,n=t.data.resources.map(function(e){return Object.assign({},e,{editing:!1})}),a.props.initTodos(n);case 5:case"end":return e.stop()}},e)})),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getTodos()}},{key:"render",value:function(){return r.a.createElement("div",{className:"todos"},r.a.createElement(K,null),r.a.createElement(N.a,{accordion:!0,defaultActiveKey:["1"]},r.a.createElement(N.a.Panel,{header:"\u672a\u5b8c\u6210\u4efb\u52a1",key:"1"},this.unCompletedTodos.length>0?this.unCompletedTodos.map(function(e){return r.a.createElement(L,Object.assign({key:e.id},e))}):r.a.createElement("h4",null,"NULL...")),r.a.createElement(N.a.Panel,{header:"\u6700\u8fd1\u5b8c\u6210\u4efb\u52a1",key:"2"},this.completedTodos.length>0?this.completedTodos.map(function(e){return r.a.createElement(L,Object.assign({key:e.id},e))}):r.a.createElement("h4",null,"NULL..."))))}},{key:"unDeletedTodos",get:function(){return this.props.todos.filter(function(e){return!e.deleted})}},{key:"unCompletedTodos",get:function(){return this.unDeletedTodos.filter(function(e){return!e.completed})}},{key:"completedTodos",get:function(){return this.unDeletedTodos.filter(function(e){return e.completed})}}]),t}(r.a.Component)),F={initTodos:function(e){return{type:"init_todos",payload:e}},updateTodo:Y},z=Object(i.b)(function(e,t){return Object(x.a)({todos:e.todos},t)},F)(H),B=a(21),W=a(397),V=a(400),J=1,R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={countDown:a.props.timer},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"alertMessage",value:function(){V.a.open({message:"\u756a\u8304\u6210\u719f\u4e86,\u8bf7\u5feb\u70b9\u6536\u5272"})}},{key:"componentDidMount",value:function(){var e=this;J=setInterval(function(){var t=e.state.countDown;e.setState({countDown:t-1e3}),document.title="".concat(e.countTime," - \u756a\u8304\u95f9\u949f"),t<1e3&&(document.title="\u756a\u8304\u95f9\u949f",e.props.onFinish(),e.alertMessage(),clearInterval(J))},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(J)}},{key:"render",value:function(){return r.a.createElement("div",{className:"countdown"},r.a.createElement("span",null,this.countTime))}},{key:"countTime",get:function(){var e=Math.floor(this.state.countDown/1e3/60),t=Math.floor(this.state.countDown/1e3%60);return"".concat(e<10?"0".concat(e):e,":").concat(t<10?"0".concat(t):t)}}]),t}(r.a.Component),Z=W.a.confirm,q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).compolentConfirm=function(){var e=prompt("\u8bf7\u8f93\u5165\u5b8c\u6210\u7684\u756a\u8304\uff08\u53d6\u6d88\u5373\u653e\u5f03\uff09","");null!==e&&""!==e?a.updateTomato({description:e,ended_at:new Date}):a.abortTomato()},a.abortConfirm=function(){Z({title:"\u4f60\u786e\u5b9a\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417\uff1f",okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){a.abortTomato()}})},a.abortTomato=function(){a.updateTomato({aborted:!0}),document.title="\u756a\u8304\u95f9\u949f"},a.updateTomato=function(){var e=Object(E.a)(g.a.mark(function e(t){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.put("tomatoes/".concat(a.props.unfinishedTomato.id),t);case 3:n=e.sent,a.props.updateTomato(n.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),a.onFinish=function(){a.forceUpdate()},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null);if(void 0===this.props.unfinishedTomato)e=r.a.createElement("button",{className:"clock-btn btn-danger",onClick:this.props.startClock},"\u5f00\u59cb\u756a\u8304");else{var t=Date.parse(this.props.unfinishedTomato.started_at),a=this.props.unfinishedTomato.duration,n=(new Date).getTime();if(n-t>=a)e=r.a.createElement("button",{className:"clock-btn btn-danger",onClick:this.compolentConfirm},r.a.createElement("span",null,"\u6536\u5272\u756a\u8304"));else if(n-t<a){var o=a-n+t;e=r.a.createElement("button",{className:"clock-btn btn-warning",onClick:this.abortConfirm},r.a.createElement("span",null,"\u653e\u5f03"),r.a.createElement(R,{timer:o,duration:a,onFinish:this.onFinish}))}}return r.a.createElement("div",{className:"clock"},e)}}]),t}(r.a.Component),G=function(e){return r.a.createElement("div",{className:"TomatoItem"},r.a.createElement("span",null,Object(B.format)(e.started_at,"HH:mm")," -",e.ended_at?Object(B.format)(e.ended_at,"HH:mm"):""),r.a.createElement("b",null,e.description?e.description:"\u521b\u5efa\u756a\u8304,\u88ab\u4e2d\u65ad"))},Q=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u5b8c\u6210\u756a\u8304"),r.a.createElement("th",null,"\u653e\u5f03\u756a\u8304")),r.a.createElement("tr",null,r.a.createElement("td",{className:"complete"},this.todayUnaborted.length<1?r.a.createElement("div",null,"\u4eca\u65e5\u6ca1\u6709\u756a\u8304\u5b8c\u6210"):this.todayUnaborted.map(function(e){return r.a.createElement(G,Object.assign({key:e.id},e))})),r.a.createElement("td",null,this.todayAborted.length<1?r.a.createElement("div",null,"\u4eca\u65e5\u6ca1\u6709\u756a\u8304\u653e\u5f03"):this.todayAborted.map(function(e){return r.a.createElement(G,Object.assign({key:e.id},e))})))))}},{key:"todayUnaborted",get:function(){return this.props.todayTomato.filter(function(e){return e.ended_at})}},{key:"todayAborted",get:function(){return this.props.todayTomato.filter(function(e){return!0===e.aborted})}}]),t}(r.a.Component),$=(a(375),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).startClock=Object(E.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("tomatoes",{duration:3e5});case 3:t=e.sent,a.props.addTomato(t.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get("tomatoes");case 3:t=e.sent,this.props.initTomatoes(t.data.resources),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"tomato"},r.a.createElement(q,{startClock:this.startClock,unfinishedTomato:this.unfinishedTomato,updateTomato:this.props.updateTomato}),r.a.createElement("div",{className:"today-plan"},r.a.createElement("h2",null,"\u4eca\u65e5\u756a\u8304"),r.a.createElement(Q,{todayTomato:this.todayTomato})))}},{key:"todayTomato",get:function(){var e=Object(B.format)(new Date,"YYYY-MM-DD");return this.props.tomatoes.filter(function(t){return 0===Object(B.format)(t.created_at,"YYYY-MM-DD").search(e)})}},{key:"unfinishedTomato",get:function(){return this.props.tomatoes.filter(function(e){return!e.description&&!e.ended_at&&!e.aborted})[0]}}]),t}(r.a.Component)),X={initTomatoes:function(e){return{type:"init_tomatos",payload:e}},addTomato:function(e){return{type:"add_tomato",payload:e}},updateTomato:_},ee=Object(i.b)(function(e,t){return Object(x.a)({tomatoes:e.tomatoes},t)},X)($),te=a(398),ae=a(62),ne=a.n(ae),re=a(394),oe=(a(169),function(e){return r.a.createElement("div",null,r.a.createElement("span",null,Object(B.format)(e.updated_at,"HH:mm")),r.a.createElement("b",null,e.description?e.description:"\u521b\u5efa\u756a\u8304,\u88ab\u4e2d\u65ad"),e.deleted?r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return e.updateTodo(e.id,{completed:!1,deleted:!1})}},"\u6062\u590d")):r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return e.updateTodo(e.id,{completed:!1})}},"\u6062\u590d"),r.a.createElement("span",{onClick:function(){return e.updateTodo(e.id,{deleted:!0})}},"\u5220\u9664")))}),ce=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).updateTodo=function(){var e=Object(E.a)(g.a.mark(function e(t,n){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n),e.prev=1,e.next=4,O.put("todos/".concat(t),n);case 4:r=e.sent,a.props.updateTodo(r.data.resource),a.forceUpdate(),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),new Error(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.completedTodosKeys.map(function(t,a){return r.a.createElement(N.a.Panel,{className:"month-list",header:t,key:a+1},r.a.createElement("div",{className:"list-item"},e.groupCompletedTodos[t].map(function(t){return r.a.createElement(oe,Object.assign({key:t.id},t,{updateTodo:e.updateTodo}))})))}),a=this.deletedTodosKeys.map(function(t,a){return r.a.createElement(N.a.Panel,{className:"month-list",header:t,key:a+1},r.a.createElement("div",{className:"list-item"},e.groupDeletedTodos[t].map(function(t){return r.a.createElement(oe,Object.assign({updateTodo:e.updateTodo,key:t.id},t))})))});return r.a.createElement("div",{className:"statisticslist"},r.a.createElement(re.a,{defaultActiveKey:"1"},r.a.createElement(re.a.TabPane,{tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",key:"1"},this.completedTodosKeys.length>0?r.a.createElement(N.a,{bordered:!1,defaultActiveKey:["1"]},t):r.a.createElement("h4",null,"NULL...")),r.a.createElement(re.a.TabPane,{tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",key:"2"},this.deletedTodosKeys.length>0?r.a.createElement(N.a,{bordered:!1,defaultActiveKey:["1"]},a):r.a.createElement("h4",null,"NULL..."))))}},{key:"groupCompletedTodos",get:function(){return ne.a.groupBy(this.props.completedTodos,function(e){return Object(B.format)(e.updated_at,"YYYY-MM-DD")})}},{key:"completedTodosKeys",get:function(){return Object.keys(this.groupCompletedTodos).sort(function(e,t){return Date.parse(t)-Date.parse(e)})}},{key:"groupDeletedTodos",get:function(){return ne.a.groupBy(this.props.deletedTodos,function(e){return Object(B.format)(e.updated_at,"YYYY-MM-DD")})}},{key:"deletedTodosKeys",get:function(){return Object.keys(this.groupDeletedTodos).sort(function(e,t){return Date.parse(t)-Date.parse(e)})}}]),t}(r.a.Component),se={updateTodo:Y},ie=Object(i.b)(function(e,t){return Object(x.a)({},t)},se)(ce),le=function(e){return r.a.createElement("div",null,r.a.createElement("span",null,Object(B.format)(e.created_at,"HH:mm"),e.ended_at?" - "+Object(B.format)(e.ended_at,"HH:mm"):""),r.a.createElement("b",null,e.description?e.description:"\u521b\u5efa\u756a\u8304,\u88ab\u4e2d\u65ad"),e.aborted&&e.ended_at?r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return e.updateTomato(e.id,{aborted:!1})}},"\u6062\u590d")):r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return e.updateTomato(e.id,{aborted:!0})}},"\u5220\u9664")))},ue=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).updateTomato=function(){var e=Object(E.a)(g.a.mark(function e(t,n){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.put("tomatoes/".concat(t),n);case 3:r=e.sent,a.props.updateTomato(r.data.resource),a.forceUpdate(),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.completedTomatoesKeys.map(function(t,a){return r.a.createElement(N.a.Panel,{className:"month-list",header:t,key:a+1},r.a.createElement("div",{className:"list-item"},e.groupCompletedTomatoes[t].map(function(t){return r.a.createElement(le,Object.assign({updateTomato:e.updateTomato,key:t.id},t))})))}),a=this.abortedTomatoesKeys.map(function(t,a){return r.a.createElement(N.a.Panel,{className:"month-list",header:t,key:a+1},r.a.createElement("div",{className:"list-item"},e.groupAbortedTomatoes[t].map(function(t){return r.a.createElement(le,Object.assign({updateTomato:e.updateTomato,key:t.id},t))})))});return r.a.createElement("div",{className:"statisticslist"},r.a.createElement(re.a,{defaultActiveKey:"1"},r.a.createElement(re.a.TabPane,{tab:"\u5df2\u5b8c\u6210\u7684\u756a\u8304",key:"1"},this.completedTomatoesKeys.length>0?r.a.createElement(N.a,{bordered:!1,defaultActiveKey:["1"]},t):r.a.createElement("h4",null,"NULL...")),r.a.createElement(re.a.TabPane,{tab:"\u5df2\u653e\u5f03\u7684\u756a\u8304",key:"2"},this.abortedTomatoesKeys.length>0?r.a.createElement(N.a,{bordered:!1,defaultActiveKey:["1"]},a):r.a.createElement("h4",null,"NULL..."))))}},{key:"groupAbortedTomatoes",get:function(){return ne.a.groupBy(this.props.abortedTomatoes,function(e){return Object(B.format)(e.created_at,"YYYY-MM-DD")})}},{key:"abortedTomatoesKeys",get:function(){return Object.keys(this.groupAbortedTomatoes).sort(function(e,t){return Date.parse(t)-Date.parse(e)})}},{key:"groupCompletedTomatoes",get:function(){return ne.a.groupBy(this.props.completedTomatoes,function(e){return Object(B.format)(e.created_at,"YYYY-MM-DD")})}},{key:"completedTomatoesKeys",get:function(){return Object.keys(this.groupCompletedTomatoes).sort(function(e,t){return Date.parse(t)-Date.parse(e)})}}]),t}(r.a.Component),de={updateTomato:_},me=Object(i.b)(function(e,t){return Object(x.a)({tomatoes:e.tomatoes},t)},de)(ue),pe=(a(387),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={year:"",month:"",newyear:"",newmonth:"",showTomato:!0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=new Date;this.setState({year:e.getFullYear(),month:e.getMonth()+1,newyear:e.getFullYear(),newmonth:e.getMonth()+1})}},{key:"render",value:function(){var e=this,t=this.completedTomatoes.length/this.monthTomatoes.length*100,a=this.completedTodos.length/this.monthTodos.length*100;return r.a.createElement("div",{className:"statistics"},r.a.createElement("div",{className:"time"},r.a.createElement("h2",{className:"title"},"\u6982\u51b5"),r.a.createElement("h4",null,this.state.year,"-",this.state.month),r.a.createElement("div",{className:"search-time"},r.a.createElement("span",null,"\u67e5\u8be2\u5e74\u6708\uff1a"),r.a.createElement(te.a,{min:1999,max:2040,defaultValue:this.state.year,className:"year",onChange:function(t){return e.setState({newyear:t})}}),r.a.createElement(te.a,{min:1,max:12,defaultValue:this.state.month,className:"month",onChange:function(t){return e.setState({newmonth:t})}}),r.a.createElement("button",{onClick:function(){return e.setState({year:e.state.newyear,month:e.state.newmonth})}},"\u67e5\u8be2"))),r.a.createElement("div",{className:"statistics-table"},r.a.createElement("div",{className:this.state.showTomato?"foucs":"",onClick:function(){return e.setState({showTomato:!0})}},r.a.createElement("p",null,"\u5f53\u6708\u756a\u8304\u7edf\u8ba1"),r.a.createElement("div",{className:"count"},"\u603b\u6570",r.a.createElement("h1",null,this.monthTomatoes.length),"\u5b8c\u6210\u6570",r.a.createElement("h1",null,this.completedTomatoes.length),"\u5b8c\u6210\u7387",r.a.createElement("h1",null,t>0?t.toFixed(2)+"%":"00.00%")),r.a.createElement("p",null,"\u4e0a\u6708\u603b\u6570\uff1a",r.a.createElement("span",null,this.lastmonthTomatoes.length),"\u4e0a\u6708\u5b8c\u6210\u6570\uff1a",r.a.createElement("span",null,this.lastcompletedTomatoes.length))),r.a.createElement("div",{className:this.state.showTomato?"":"foucs",onClick:function(){return e.setState({showTomato:!1})}},r.a.createElement("p",null,"\u5f53\u6708\u4efb\u52a1\u7edf\u8ba1"),r.a.createElement("div",{className:"count"},"\u603b\u6570",r.a.createElement("h1",null,this.monthTodos.length),"\u5b8c\u6210\u6570",r.a.createElement("h1",null,this.completedTodos.length),"\u5b8c\u6210\u7387",r.a.createElement("h1",null,a>0?a.toFixed(2)+"%":"00.00%")),r.a.createElement("p",null,"\u4e0a\u6708\u603b\u6570\uff1a",r.a.createElement("span",null,this.lastmonthTodos.length),"\u4e0a\u6708\u5b8c\u6210\u6570\uff1a",r.a.createElement("span",null,this.lastcompletedTodos.length)))),this.state.showTomato?r.a.createElement(me,{abortedTomatoes:this.abortedTomatoes,completedTomatoes:this.completedTomatoes}):r.a.createElement(ie,{completedTodos:this.completedTodos,deletedTodos:this.deletedTodos}))}},{key:"monthTodos",get:function(){var e=this.state.year+"-"+this.state.month;return this.props.todos.filter(function(t){return 0===Object(B.format)(t.updated_at,"YYYY-M").search(e)})}},{key:"lastmonthTodos",get:function(){var e="";return e=1===this.state.month?this.state.year-1+"-12":this.state.year+"-"+(this.state.month-1),this.props.todos.filter(function(t){return 0===Object(B.format)(t.updated_at,"YYYY-M").search(e)})}},{key:"monthTomatoes",get:function(){var e=this.state.year+"-"+this.state.month;return this.props.tomatoes.filter(function(t){return 0===Object(B.format)(t.created_at,"YYYY-M").search(e)})}},{key:"lastmonthTomatoes",get:function(){var e="";return e=1===this.state.month?this.state.year-1+"-12":this.state.year+"-"+(this.state.month-1),this.props.tomatoes.filter(function(t){return 0===Object(B.format)(t.created_at,"YYYY-M").search(e)})}},{key:"abortedTomatoes",get:function(){return this.monthTomatoes.filter(function(e){return e.aborted})}},{key:"completedTomatoes",get:function(){return this.monthTomatoes.filter(function(e){return e.ended_at&&!e.aborted})}},{key:"lastcompletedTomatoes",get:function(){return this.lastmonthTomatoes.filter(function(e){return e.ended_at&&!e.aborted})}},{key:"deletedTodos",get:function(){return this.monthTodos.filter(function(e){return e.deleted})}},{key:"completedTodos",get:function(){return this.monthTodos.filter(function(e){return e.completed&&!e.deleted})}},{key:"lastcompletedTodos",get:function(){return this.lastmonthTodos.filter(function(e){return e.completed&&!e.deleted})}}]),t}(r.a.Component)),he=Object(i.b)(function(e,t){return Object(x.a)({todos:e.todos,tomatoes:e.tomatoes},t)})(pe),fe=(a(388),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getMe=Object(E.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("me");case 2:t=e.sent,a.setState({user:t.data});case 4:case"end":return e.stop()}},e)})),a.state={user:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Object(E.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMe();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.props.history.push("/login"),localStorage.setItem("x-token","")}},{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement("nav",null,r.a.createElement("div",{id:"logo"},r.a.createElement("img",{src:C.a,alt:"logo"}),r.a.createElement("h1",null,"\u756a\u8304\u95f9\u949f")),r.a.createElement("div",{className:"user"},r.a.createElement("span",null,this.state.user.account),r.a.createElement(T.a,{onClick:this.logout.bind(this)},"\u6ce8\u9500"))),r.a.createElement("main",null,r.a.createElement("div",{className:"content"},r.a.createElement(ee,null),r.a.createElement("aside",null,r.a.createElement(z,null))),r.a.createElement(he,null)))}}]),t}(r.a.Component)),be=a(71),ye=a(401),ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).errorAlert=function(){a.setState({error:!0}),setTimeout(function(){return a.setState({error:!1})},2e3)},a.state={user:"",password:"",error:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e,t){var a={};a[e]=t,this.setState(a)}},{key:"login",value:function(){var e=Object(E.a)(g.a.mark(function e(){var t,a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.user,n=t.password,""!==a&&""!==n){e.next=4;break}return this.errorAlert(),e.abrupt("return");case 4:return e.prev=4,e.next=7,O.post("sign_in/user",{account:a,password:n});case 7:this.props.history.push("/"),e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(4),422!==e.t0.response.status){e.next=15;break}return this.errorAlert(),e.abrupt("return");case 15:throw new Error(e.t0);case 16:case"end":return e.stop()}},e,this,[[4,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"login"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:C.a,alt:"logo"})),r.a.createElement("h1",null,"\u756a\u8304\u95f9\u949f\uff0c\u79d1\u5b66\u7ba1\u7406\u65f6\u95f4\u5de5\u5177"),r.a.createElement(D.a,{size:"large",prefix:r.a.createElement(M.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",onChange:function(t){return e.onChange("user",t.target.value)},ref:"userInput"}),r.a.createElement(D.a.Password,{size:"large",prefix:r.a.createElement(M.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:function(t){return e.onChange("password",t.target.value)}}),r.a.createElement(T.a,{type:"primary",size:"large",onClick:this.login.bind(this)},"\u767b\u5f55"),r.a.createElement("p",null,"\u6ca1\u6709\u8d26\u53f7\uff1f",r.a.createElement(be.a,{to:"/register"},"\u6ce8\u518c")),this.state.error?r.a.createElement(ye.a,{message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7528\u6237\u540d\u6216\u5bc6\u7801",type:"error",showIcon:!0}):"")}}]),t}(r.a.Component),ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).errorAlert=function(){a.setState({error:!0}),setTimeout(function(){return a.setState({error:!1})},2e3)},a.repeatAlert=function(){a.setState({repeat:!0}),setTimeout(function(){return a.setState({repeat:!1})},2e3)},a.state={user:"",password:"",passwordconfirm:"",error:!1,repeat:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e,t){var a={};a[e]=t,this.setState(a)}},{key:"register",value:function(){var e=Object(E.a)(g.a.mark(function e(){var t,a,n,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.user,n=t.password,r=t.passwordconfirm,""!==a&&""!==n&&""!==r){e.next=6;break}return this.errorAlert(),e.abrupt("return");case 6:if(n===r){e.next=9;break}return this.errorAlert(),e.abrupt("return");case 9:return e.prev=9,e.next=12,O.post("sign_up/user",{account:a,password:n,password_confirmation:r});case 12:this.props.history.push("/"),e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(9),422===e.t0.response.status&&this.repeatAlert(),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}},e,this,[[9,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"register"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:C.a,alt:"logo"})),r.a.createElement("h1",null,"\u756a\u8304\u95f9\u949f\uff0c\u79d1\u5b66\u7ba1\u7406\u65f6\u95f4\u5de5\u5177"),r.a.createElement(D.a,{size:"large",prefix:r.a.createElement(M.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",onChange:function(t){return e.onChange("user",t.target.value)}}),r.a.createElement(D.a.Password,{size:"large",prefix:r.a.createElement(M.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:function(t){return e.onChange("password",t.target.value)}}),r.a.createElement(D.a.Password,{size:"large",prefix:r.a.createElement(M.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u786e\u8ba4\u5bc6\u7801",onChange:function(t){return e.onChange("passwordconfirm",t.target.value)}}),r.a.createElement(T.a,{type:"primary",size:"large",onClick:this.register.bind(this)},"\u6ce8\u518c"),r.a.createElement("p",null,"\u5df2\u6709\u8d26\u53f7\uff1f",r.a.createElement(be.a,{to:"/login"},"\u767b\u5f55")),this.state.error?r.a.createElement(ye.a,{message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7528\u6237\u540d\u6216\u5bc6\u7801",type:"error",showIcon:!0}):"",this.state.repeat?r.a.createElement(ye.a,{message:"\u7528\u6237\u540d\u91cd\u590d\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",type:"error",showIcon:!0}):"")}}]),t}(r.a.Component),Ee=(a(391),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.createElement(h.b,{history:y},n.createElement("div",null,n.createElement(h.a,{exact:!0,path:"/",component:fe}),n.createElement(h.a,{path:"/login",component:ve}),n.createElement(h.a,{path:"/register",component:ge})))}}]),t}(n.Component)),Te=a(64),ke=Object(s.b)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_todos":return[t.payload].concat(Object(Te.a)(e));case"init_todos":return Object(Te.a)(t.payload);case"update_todo":return e.map(function(e){return e.id===t.payload.id?t.payload:e});case"edit_todo":return e.map(function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})});default:return e}},tomatoes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_tomato":return[t.payload].concat(Object(Te.a)(e));case"update_tomato":return e.map(function(e){return e.id===t.payload.id?t.payload:e});case"init_tomatos":return Object(Te.a)(t.payload);default:return e}}}),je=(a(392),Object(s.c)(ke));c.a.render(r.a.createElement(i.a,{store:je},r.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},60:function(e,t,a){e.exports=a.p+"static/media/logo200.9ffc74fb.png"}},[[193,1,2]]]);
//# sourceMappingURL=main.c1a367ff.chunk.js.map